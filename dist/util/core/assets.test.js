/*! For license information please see assets.test.js.LICENSE.txt */
(()=>{var e={6531:(e,t,o)=>{"use strict";o.d(t,{default:()=>r});var n=o(2829);class s extends n.default{static access_token=new s("access_token");static analytics_session=new s("analytics_session");static auth_token=new s("authentication_token");static bq_auto_lead_send=new s("bq_auto_lead_send");static cart=new s("order_id");static ccpa=new s("sn-ccpa-optin");static debug=new s("sn-debug");static dynamic_yield_id_server=new s("_dyid_server");static dynamic_yield_id=new s("_dyid");static dynamic_yield_jsession=new s("_dyjsession");static id_token=new s("id_token");static price_lists=new s("plid");static promo_drawer=new s("promo_drawer");static refresh_token=new s("refresh_token");static request_names=new s("request_names");static session=new s("_sleep_number_session");static sessions=new s("sessions");static sn=new s("sn");static _=this.closeEnum();constructor(e){super(),this.name=e}}const r=s},1292:(e,t,o)=>{"use strict";var n=o(7814);(0,n.namespace)("sn.dfd",class{#e;constructor(){this.#e="pending",this.p=new Promise(((e,t)=>{this.resolver=e,this.rejector=t}))}state(){return this.#e}resolve(){return this.resolver(...arguments),this.#e="resolved",this}reject(){return this.rejector(...arguments),this.#e="rejected",this}promise(){return this.p}done(e){return this.p.then(e,(()=>{})),this}then(){return this.p.then(...arguments),this}fail(){return this.p.catch(...arguments),this}catch(){return this.p.catch(...arguments),this}always(){return this.p.finally(...arguments),this}finally(){return this.p.finally(...arguments),this}})},3027:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});class n{#t;#o;constructor(e,t){this.#t=e,this.#o=t}get src(){return this.#t}get type(){return this.#o}toString(){return`[MediaSource src: "${this.#t}", type: "${this.#o}"]`}toJSON(){return{src:this.#t,type:this.#o}}static of(e,t){return new n(e,t)}}const s=n},6276:(e,t,o)=>{"use strict";o(7814),o(5981)},9576:(e,t,o)=>{"use strict";o.d(t,{getAssetCoverSize:()=>p,getCloudinaryUrl:()=>d,getCloudinaryVersion:()=>l,getOptimizedVideo:()=>m,stripCloudinaryUrl:()=>u});var n=o(3818);o(5813),o(3302),o(6276),o(5203),o(7109);var s=o(3168),r=o(3027);o(5567);const i="https:"===(s.win||window).location.protocol;const c=(s.win||window)?.sn_globals||{config:{}},a=c?.config?.buildNumber||(new Date).toJSON().slice(0,10).replace(/-/g,"");function l(){const e=a.replace(/\D/g,"");return e?`v${e}`:""}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image";if(!n.jU||!e||(0,s.isDevelopment)()||e.includes("cloudinary.com")||e.includes("cdn.sleepnumber.com"))return function(e){return e&&i?e.replace(/http:/gi,"https:"):e}(e);const o=(s.win||window).location.origin,r=new URL(e,o),c=r.pathname,a=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image"){case"image":default:return"f_auto,q_auto:eco";case"video":return"vc_auto";case"svg":return""}}(r.pathname.search(/\.svg$/g)>-1?"svg":t);let d="sleepnumber";return o===s.qaUrl&&(d="snbr-qa"),o===s.stageUrl&&(d="snbr-stg"),o===s.localUrl&&(d="snbr-local"),"https://res.cloudinary.com/"+d+`/${t}/upload/${a}/${l()}/uploads`+c}async function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;const o="string"==typeof e?await(n=e,new Promise((e=>{const t=new Image;t.onload=()=>{e({width:t.width,height:t.height}),t.onload=null},t.src=n}))):{width:e.width,height:e.height};var n;const s=t===window,r=s?window.innerWidth:t.clientWidth,i=s?window.innerHeight:t.clientHeight;let c=r-o.width,a=o.width+c,l=o.height*a/o.width;return o.width=a,o.height=l,o.height<i&&(c=i-o.height,l=o.height+c,a=o.width*l/o.height,o.width=a,o.height=l),o}function u(e){const t=e.split("/").filter((e=>!e.includes("q_auto")&&!e.includes("vc_auto"))),o=t.pop(),n=o.lastIndexOf("."),s=o.length-5<=n?o.substring(0,n):o;return[...t,s].join("/")}function m(e,t,o){if(!e)return null;let n=["c_limit","q_99","fl_keep_dar","w_"+(t<768?360:1920)];o&&(n=["q_auto:best"]);const s=u(e);return[{codecTransform:"vc_vp9",container:"webm",codec:"vp9"},{codecTransform:"vc_h265",container:"mp4",codec:"hvc1"},{codecTransform:"vc_h264",container:"mp4",codec:"avc1"}].map((e=>{let{codecTransform:t,container:o,codec:i}=e;const c=`f_${o}`,a=[...n,t,c].join(","),l=[s.replace("video/upload",`video/upload/${a}`),o].join("."),d=`video/${o};codecs=${i}`;return r.default.of(l,d)}))}},3168:(e,t,o)=>{"use strict";o.d(t,{isDebug:()=>g,isDevelopment:()=>w,isJestEnv:()=>m,isProduction:()=>v,localUrl:()=>d,qaUrl:()=>p,stageUrl:()=>u,win:()=>f});var n=o(3818),s=o(6808),r=o.n(s),i=o(6531),c=o(2829),a=o(5981),l=o(7814);const d="https://sleepnumber.test",p="https://qa.sleepnumber.com",u="https://staging.sleepnumber.com",m="test"===o.g?.process?.env?.NODE_ENV;let _=o.g||window;if(!n.jU&&!m){const e={local:"https://sleepnumber.test:8090",qa:p,staging:u,production:"https://www.sleepnumber.com"},t=e[process.env.BUILD_ENV]||e.local,o=new URL(`${t}/categories/beds-on-sale`);_={..._,location:o}}const f=_,h=f?.sn_globals||{config:{}},v=()=>"production"===h.config.env,w=()=>"development"===h.config.env;function g(){if(!n.jU)return!1;const e=r().get(i.default.debug.name);return e&&"false"!==e}f?.location?.pathname?.startsWith("/dev/"),f?.top?.location?.href?.includes("/admin/")||f?.location?.pathname?.startsWith("/admin/"),h.config.env,(0,l.namespace)("sn.toggleDebug",(function(){const e=g();r().set(i.default.debug.name,!e),console.log(`sn-debug set to "${!e}"`)})),"Intl"in f&&Intl.DateTimeFormat().resolvedOptions().timeZone;const b={esc:27,space:32,backspace:8,enter:13,tab:9,up:38,down:40,left:37,right:39,home:36,end:35,n:78,p:80};b.radio={prev:[b.left,b.up],next:[b.right,b.down]},b.arrows=[b.left,b.up,b.right,b.down];class y extends c.default{static idle=new y;static pending=new y;static success=new y;static error=new y;static active=new y;static complete=new y;static _=this.closeEnum()}class k extends c.default{static up=new k;static down=new k;static left=new k;static right=new k;static _=this.closeEnum()}class x extends c.default{static NotStarted=new x({name:"not_started"});static Login=new x({name:"login",next:()=>x.Shipping});static Shipping=new x({name:"shipping",next:()=>x.Delivery});static Delivery=new x({name:"delivery",next:()=>x.Payment});static Payment=new x({name:"payment",next:()=>x.Review});static Review=new x({name:"review",next:()=>x.Confirmation});static Confirmation=new x({name:"confirmation"});static _=this.closeEnum();constructor(e){super(),this.next=e.next,this.name=e.name}}class j extends c.default{static dropdown=new j(1e3);static sticky=new j(1020);static fixed=new j(1030);static modal_backdrop=new j(1040);static modal=new j(107159);static popover=new j(1060);static tooltip=new j(1070);static chat_button=new j(107158);static over_chat=new j(107159);constructor(e){super(),this.value=e}}const q={header_unpin:"-unpinned-header",jumping:"-jump-scrolling",position_sticky:"position-sticky",top_below_header:"top-below-header",search_open:"-search-open",skip_nav_show:"-skip-nav-show"};q.sticky_top=[q.position_sticky,q.top_below_header],(0,a.isFunc)(f,"performance.now")?f?.performance:f?.Date},7109:(e,t,o)=>{"use strict";var n=o(3818),s=o(2829);class r extends s.default{static mb=new r({name:"mobile",start:0});static tb=new r({name:"tablet",start:768});static dt=new r({name:"desktop",start:1025});static _=this.closeEnum();constructor(e){let{name:t,start:o}=e;super(),this.name=t,this.start=o}}let i=!1;(()=>{try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get(){i=!0}}))}catch(e){}})(),n.jU&&document.createElement("div")},3302:(e,t,o)=>{"use strict";o(3818),o(3168),o(5813),o(5203),o(1292)},2829:(e,t,o)=>{"use strict";o.d(t,{default:()=>s});class n{static closeEnum(){const e=[],t=[];for(const[o,n]of Object.entries(this))e.push(o),n.enumKey=o,n.enumOrdinal=t.length,t.push(n);this.enumKeys=e,this.enumValues=t}static enumValueOf(e){const t=this.enumKeys.indexOf(e);if(t>=0)return this.enumValues[t]}static[Symbol.iterator](){return this.enumValues[Symbol.iterator]()}toString(){return`${this.constructor.name}.${this.enumKey}`}}const s=n},5981:(e,t,o)=>{"use strict";o.d(t,{identity:()=>c,isFunc:()=>s,noop:()=>i,required:()=>r});var n=o(7814);const s=function(){return 1===arguments.length?"function"==typeof(arguments.length<=0?void 0:arguments[0]):"function"==typeof(0,n.prop)(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])},r=e=>{throw new Error(`${e} is a required parameter.`)},i=()=>{},c=e=>e},5813:(e,t,o)=>{"use strict";var n=o(5981),s=o(3168);const r={};["assert","dir","count","log","info","debug","warn","error","table","trace","group","groupEnd","groupCollapsed","profile","profileEnd","time","timeEnd","timeStamp"].forEach((e=>{const t=s.win?.console&&s.win?.console[e],o=!s.isJestEnv&&!(0,s.isProduction)()||(0,s.isDebug)();r[e]=t&&o?function(){s.win.console[e](...arguments)}:n.noop,r.sndebug=function(){if((0,s.isDebug)()){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];console.log("DEBUG:",...t)}}}))},7814:(e,t,o)=>{"use strict";function n(e,t){if(!e)return e;let o=e;const n=t.replace(/\[/g,".").replace(/[\]"'`]/g,"").split(".");for(let e=0;e<n.length;e++){const t=o[n[e]],s=null==t;if(o=t,e===n.length-1||s)break}return o}function s(e,t){const n=o.g||window,s=e.split(".");let r,i,c;for(n[s[0]]||(n[s[0]]={}),r=n[s[0]],i=1,c=s.length;i<c;i++)r[s[i]]||(r[s[i]]={}),r=r[s[i]];return t&&(function(e,t,o){const n=t.split(".");let s,r,i;for(s=e,r=0,i=n.length;r<i;r++)r===i-1?s[n[r]]=o:(s[n[r]]||(s[n[r]]={}),s=s[n[r]])}(n,e,t),r=t),r}o.d(t,{namespace:()=>s,prop:()=>n})},5203:(e,t,o)=>{"use strict";o(3168)},5567:(e,t,o)=>{"use strict";o(5203),Object.freeze({test:"test",gallery:"gallery",postcard:"postcard",ghosted_base:"ghosted-base",promo:"promo",thumbnail:"thumbnail",corner_thumbnail:"corner-thumbnail",mb:"mobile",tb:"tablet",dt:"desktop",split:"split",flextop:"flextop",standard:"standard",front:"front",lifestyle:"45",bundle:"bundle",matt_only:"matt-only",matt_only_thumbnail:"matt-only-thumbnail",ib:"ib",ibf:"ibf",ff:"ff",ff1:"ff1",ff2:"ff2",ff3:"ff3",includes:"includes",base:"base",split_base:"split-base",temp_balancing:"temp-balancing",addon:"addon",single:"single",double:"double",new:"new",nextgen:"nextgen",next_gen_compare:"next-gen-compare"})},4365:(e,t,o)=>{"use strict";o.d(t,{getCloudinaryTransformData:()=>s,setCloudinaryTransforms:()=>r,updateCloudinaryTransforms:()=>i});const n=["a","ac","af","ar","b","bo","br","c","co","cs","d","dl","dn","dpr","du","e","eo","f","fl","fn","fps","g","h","if","ki","l","o","p","pg","q","r","so","sp","t","u","vc","vs","w","x","y","z","$"];function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e.indexOf("upload/")+7,o=e.substring(t).split(/[,/]/).find((e=>{if(!e.includes("_"))return!0;const t=e.substring(0,e.indexOf("_"));return!n.includes(t)})),s=e.indexOf(o,t+1)-1,r=e.substring(t,s).split(/[,/]/);return{url:e,start:t,end:s,transforms:r,asMap:r.reduce(((e,t)=>(e[t.substring(0,t.indexOf("_"))]=t,e)),{}),prefix:e.substring(0,t),suffix:e.substring(s)}}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const{prefix:o,suffix:n}=s(e);return`${o}${t.join(",")}${n}`}function i(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const t=s(arguments.length>0&&void 0!==arguments[0]?arguments[0]:""),o=e.reduce(((e,t)=>(e[t.substring(0,t.indexOf("_"))]=t,e)),{}),n={...t.asMap};Object.entries(o).forEach((e=>{let[t,o]=e;n[t]=o}));const r=Object.values(n);return`${t.prefix}${r.join(",")}${t.suffix}`}},3818:(e,t)=>{"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n="undefined"!=typeof window&&void 0!==window.document;"undefined"!=typeof process&&null!=process.versions&&process.versions.node,"object"===("undefined"==typeof self?"undefined":o(self))&&self.constructor&&self.constructor.name,"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),"undefined"!=typeof Deno&&void 0!==Deno.version&&Deno.version.deno;t.jU=n},6808:(e,t,o)=>{var n,s,r;r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var o=arguments[e];for(var n in o)t[n]=o[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function o(n){function s(){}function r(t,o,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},s.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var i=JSON.stringify(o);/^[\{\[]/.test(i)&&(o=i)}catch(e){}o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var c="";for(var a in r)r[a]&&(c+="; "+a,!0!==r[a]&&(c+="="+r[a].split(";")[0]));return document.cookie=t+"="+o+c}}function i(e,o){if("undefined"!=typeof document){for(var s={},r=document.cookie?document.cookie.split("; "):[],i=0;i<r.length;i++){var c=r[i].split("="),a=c.slice(1).join("=");o||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var l=t(c[0]);if(a=(n.read||n)(a,l)||t(a),o)try{a=JSON.parse(a)}catch(e){}if(s[l]=a,e===l)break}catch(e){}}return e?s[e]:s}}return s.set=r,s.get=function(e){return i(e,!1)},s.getJSON=function(e){return i(e,!0)},s.remove=function(t,o){r(t,"",e(o,{expires:-1}))},s.defaults={},s.withConverter=o,s}((function(){}))},void 0===(s="function"==typeof(n=r)?n.call(t,o,t,e):n)||(e.exports=s),e.exports=r()}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{"use strict";o.r(n);var e=o(3168),t=o(9576);const s=JSON.parse('{"desktop":[[{"src":"https://res.cloudinary.com/snbr-qa/video/upload/c_limit,q_99,fl_keep_dar,w_1920,vc_vp9,f_webm/v1/workarea/content/assets/l3tu9r0otltkseoechnp.webm","type":"video/webm;codecs=vp9"},{"src":"https://res.cloudinary.com/snbr-qa/video/upload/c_limit,q_99,fl_keep_dar,w_1920,vc_h265,f_mp4/v1/workarea/content/assets/l3tu9r0otltkseoechnp.mp4","type":"video/mp4;codecs=hvc1"},{"src":"https://res.cloudinary.com/snbr-qa/video/upload/c_limit,q_99,fl_keep_dar,w_1920,vc_h264,f_mp4/v1/workarea/content/assets/l3tu9r0otltkseoechnp.mp4","type":"video/mp4;codecs=avc1"}],[{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_1920,vc_vp9,f_webm/v1/workarea/content/assets/n0wznr08b72f3oa0lkon.webm","type":"video/webm;codecs=vp9"},{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_1920,vc_h265,f_mp4/v1/workarea/content/assets/n0wznr08b72f3oa0lkon.mp4","type":"video/mp4;codecs=hvc1"},{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_1920,vc_h264,f_mp4/v1/workarea/content/assets/n0wznr08b72f3oa0lkon.mp4","type":"video/mp4;codecs=avc1"}],[{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_1920,vc_vp9,f_webm/ac_none/v1/workarea/content/assets/jdzkftjlc4jxdxcpor0g.webm","type":"video/webm;codecs=vp9"},{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_1920,vc_h265,f_mp4/ac_none/v1/workarea/content/assets/jdzkftjlc4jxdxcpor0g.mp4","type":"video/mp4;codecs=hvc1"},{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_1920,vc_h264,f_mp4/ac_none/v1/workarea/content/assets/jdzkftjlc4jxdxcpor0g.mp4","type":"video/mp4;codecs=avc1"}]],"mobile":[[{"src":"https://res.cloudinary.com/snbr-qa/video/upload/c_limit,q_99,fl_keep_dar,w_360,vc_vp9,f_webm/v1/workarea/content/assets/l3tu9r0otltkseoechnp.webm","type":"video/webm;codecs=vp9"},{"src":"https://res.cloudinary.com/snbr-qa/video/upload/c_limit,q_99,fl_keep_dar,w_360,vc_h265,f_mp4/v1/workarea/content/assets/l3tu9r0otltkseoechnp.mp4","type":"video/mp4;codecs=hvc1"},{"src":"https://res.cloudinary.com/snbr-qa/video/upload/c_limit,q_99,fl_keep_dar,w_360,vc_h264,f_mp4/v1/workarea/content/assets/l3tu9r0otltkseoechnp.mp4","type":"video/mp4;codecs=avc1"}],[{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_360,vc_vp9,f_webm/v1/workarea/content/assets/n0wznr08b72f3oa0lkon.webm","type":"video/webm;codecs=vp9"},{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_360,vc_h265,f_mp4/v1/workarea/content/assets/n0wznr08b72f3oa0lkon.mp4","type":"video/mp4;codecs=hvc1"},{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_360,vc_h264,f_mp4/v1/workarea/content/assets/n0wznr08b72f3oa0lkon.mp4","type":"video/mp4;codecs=avc1"}],[{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_360,vc_vp9,f_webm/ac_none/v1/workarea/content/assets/jdzkftjlc4jxdxcpor0g.webm","type":"video/webm;codecs=vp9"},{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_360,vc_h265,f_mp4/ac_none/v1/workarea/content/assets/jdzkftjlc4jxdxcpor0g.mp4","type":"video/mp4;codecs=hvc1"},{"src":"https://cdn.sleepnumber.com/video/upload/c_limit,q_99,fl_keep_dar,w_360,vc_h264,f_mp4/ac_none/v1/workarea/content/assets/jdzkftjlc4jxdxcpor0g.mp4","type":"video/mp4;codecs=avc1"}]]}');var r=o(4365);jest.mock("./constants"),describe("getCloudinaryUrl generates proper URLs for each environment",(()=>{beforeEach((()=>{delete window.location})),test("Local",(async()=>{window.location=new URL("https://sleepnumber.test"),e.isDevelopment.mockImplementationOnce((()=>!0));const o=(0,t.getCloudinaryUrl)("/dist/images/foobar.jpg");expect(o).toEqual("/dist/images/foobar.jpg")})),test("QA",(async()=>{window.location=new URL("https://qa.sleepnumber.com");const e=(0,t.getCloudinaryUrl)("/dist/images/foobar.jpg");expect(e).toEqual(`https://res.cloudinary.com/snbr-qa/image/upload/f_auto,q_auto:eco/${(0,t.getCloudinaryVersion)()}/uploads/dist/images/foobar.jpg`)})),test("Staging",(async()=>{window.location=new URL("https://staging.sleepnumber.com"),window.sn_globals.config.env="staging";const e=(0,t.getCloudinaryUrl)("/dist/images/foobar.jpg");expect(e).toEqual(`https://res.cloudinary.com/snbr-stg/image/upload/f_auto,q_auto:eco/${(0,t.getCloudinaryVersion)()}/uploads/dist/images/foobar.jpg`)})),test("Production",(async()=>{window.location=new URL("https://www.sleepnumber.com");const e=(0,t.getCloudinaryUrl)("/dist/images/foobar.jpg");expect(e).toEqual(`https://res.cloudinary.com/sleepnumber/image/upload/f_auto,q_auto:eco/${(0,t.getCloudinaryVersion)()}/uploads/dist/images/foobar.jpg`)}))})),describe("util/assets.js",(()=>{test("getAssetCoverSize",(async()=>{const e=document.createElement("div");document.body.appendChild(e),jest.spyOn(e,"clientWidth","get").mockImplementation((()=>200)),jest.spyOn(e,"clientHeight","get").mockImplementation((()=>200));const o=new Image;jest.spyOn(o,"width","get").mockImplementation((()=>200)),jest.spyOn(o,"height","get").mockImplementation((()=>100));let n=await(0,t.getAssetCoverSize)(o,e);expect(n.width).toBe(400),expect(n.height).toBe(200),jest.spyOn(o,"width","get").mockImplementation((()=>100)),jest.spyOn(o,"height","get").mockImplementation((()=>200)),n=await(0,t.getAssetCoverSize)(o,e),expect(n.width).toBe(200),expect(n.height).toBe(400),jest.spyOn(o,"width","get").mockImplementation((()=>50)),jest.spyOn(o,"height","get").mockImplementation((()=>50)),n=await(0,t.getAssetCoverSize)(o,e),expect(n.width).toBe(200),expect(n.height).toBe(200),jest.spyOn(o,"width","get").mockImplementation((()=>1600)),jest.spyOn(o,"height","get").mockImplementation((()=>900)),n=await(0,t.getAssetCoverSize)(o,e),expect(Math.ceil(n.width)).toBe(356),expect(n.height).toBe(200)})),test("stripCloudinaryUrl",(async()=>{const e=["https://res.cloudinary.com/snbr-qa/video/upload/c_limit,q_auto:eco,w_768,vc_vp9/v1/workarea/content/assets/l3tu9r0otltkseoechnp.mp4","https://cdn.sleepnumber.com/video/upload/vc_auto/v1/workarea/content/assets/n0wznr08b72f3oa0lkon.mp4","https://cdn.sleepnumber.com/video/upload/ac_none/vc_auto/v1/workarea/content/assets/jdzkftjlc4jxdxcpor0g"].map(t.stripCloudinaryUrl);expect(e).toEqual(["https://res.cloudinary.com/snbr-qa/video/upload/v1/workarea/content/assets/l3tu9r0otltkseoechnp","https://cdn.sleepnumber.com/video/upload/v1/workarea/content/assets/n0wznr08b72f3oa0lkon","https://cdn.sleepnumber.com/video/upload/ac_none/v1/workarea/content/assets/jdzkftjlc4jxdxcpor0g"])})),test("getOptimizedVideo",(async()=>{const e=["https://res.cloudinary.com/snbr-qa/video/upload/c_limit,q_auto:eco,w_768,vc_vp9/v1/workarea/content/assets/l3tu9r0otltkseoechnp.mp4","https://cdn.sleepnumber.com/video/upload/vc_auto/v1/workarea/content/assets/n0wznr08b72f3oa0lkon.mp4","https://cdn.sleepnumber.com/video/upload/ac_none/vc_auto/v1/workarea/content/assets/jdzkftjlc4jxdxcpor0g"],o={desktop:e.map((e=>(0,t.getOptimizedVideo)(e,2e3))),mobile:e.map((e=>(0,t.getOptimizedVideo)(e,300)))},{desktop:n,mobile:r}=s;o.desktop.forEach(((e,t)=>{const o=n[t];e.forEach(((e,t)=>{expect(e.src).toEqual(o[t].src),expect(e.type).toEqual(o[t].type)}))})),o.mobile.forEach(((e,t)=>{const o=r[t];e.forEach(((e,t)=>{expect(e.src).toEqual(o[t].src),expect(e.type).toEqual(o[t].type)}))}))})),test("getCloudinaryTransformData",(async()=>{const e=(0,r.getCloudinaryTransformData)("https://cdn.sleepnumber.com/video/upload/ar_1,c_fill,h_768,so_auto,co_black,e_colorize:40/f_auto/v1/workarea/catalog/product_videos/lyocell-ultra-sheets-set/gallery_video_1.jpg");expect(e.transforms).toEqual(["ar_1","c_fill","h_768","so_auto","co_black","e_colorize:40","f_auto"]),expect(e.start).toBe(41),expect(e.end).toBe(96),expect(e.prefix).toBe("https://cdn.sleepnumber.com/video/upload/"),expect(e.suffix).toBe("/v1/workarea/catalog/product_videos/lyocell-ultra-sheets-set/gallery_video_1.jpg")})),test("setCloudinaryTransforms",(async()=>{const e=(0,r.setCloudinaryTransforms)("https://cdn.sleepnumber.com/video/upload/ar_1,c_fill,h_768,so_auto,co_black,e_colorize:40/f_auto/v1/workarea/catalog/product_videos/lyocell-ultra-sheets-set/gallery_video_1.jpg",["so_42","co_red"]);expect(e).toBe("https://cdn.sleepnumber.com/video/upload/so_42,co_red/v1/workarea/catalog/product_videos/lyocell-ultra-sheets-set/gallery_video_1.jpg")})),test("updateCloudinaryTransforms",(async()=>{const e=(0,r.updateCloudinaryTransforms)("https://cdn.sleepnumber.com/video/upload/ar_1,c_fill,h_768,so_auto,co_black,e_colorize:40/f_auto/v1/workarea/catalog/product_videos/lyocell-ultra-sheets-set/gallery_video_1.jpg",["so_42","c_limit"]);expect(e).toBe("https://cdn.sleepnumber.com/video/upload/ar_1,c_limit,h_768,so_42,co_black,e_colorize:40,f_auto/v1/workarea/catalog/product_videos/lyocell-ultra-sheets-set/gallery_video_1.jpg")}))}))})();var s=exports;for(var r in n)s[r]=n[r];n.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();