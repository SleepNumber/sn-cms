/*! For license information please see ImageTracker.js.LICENSE.txt */
(()=>{var e={6531:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});var s=n(2829);class o extends s.default{static access_token=new o("access_token");static analytics_session=new o("analytics_session");static auth_token=new o("authentication_token");static bq_auto_lead_send=new o("bq_auto_lead_send");static cart=new o("order_id");static ccpa=new o("sn-ccpa-optin");static debug=new o("sn-debug");static dynamic_yield_id_server=new o("_dyid_server");static dynamic_yield_id=new o("_dyid");static dynamic_yield_jsession=new o("_dyjsession");static id_token=new o("id_token");static price_lists=new o("plid");static promo_drawer=new o("promo_drawer");static refresh_token=new o("refresh_token");static request_names=new o("request_names");static session=new o("_sleep_number_session");static sessions=new o("sessions");static sn=new o("sn");static _=this.closeEnum();constructor(e){super(),this.name=e}}const r=o},1292:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});var s=n(7814);class o{#e;constructor(){this.#e="pending",this.p=new Promise(((e,t)=>{this.resolver=e,this.rejector=t}))}state(){return this.#e}resolve(){return this.resolver(...arguments),this.#e="resolved",this}reject(){return this.rejector(...arguments),this.#e="rejected",this}promise(){return this.p}done(e){return this.p.then(e,(()=>{})),this}then(){return this.p.then(...arguments),this}fail(){return this.p.catch(...arguments),this}catch(){return this.p.catch(...arguments),this}always(){return this.p.finally(...arguments),this}finally(){return this.p.finally(...arguments),this}}(0,s.namespace)("sn.dfd",o);const r=o},6276:(e,t,n)=>{"use strict";n(7814),n(5981)},9576:(e,t,n)=>{"use strict";n.d(t,{getBgImages:()=>i}),n(3818),n(5813);var s=n(3302),o=(n(6276),n(5203),n(7109),n(3168));n(5567),(o.win||window).location.protocol;const r=(o.win||window)?.sn_globals||{config:{}};function i(e){const t=[],n=(0,s.getElement)(e);if(!n)return t;const o={node:n,bg:getComputedStyle(n).backgroundImage};return"none"!==o.bg&&t.push(o),Array.from(n.querySelectorAll("*")).map((e=>({node:e,bg:getComputedStyle(e).backgroundImage}))).filter((e=>"none"!==e.bg)).forEach((e=>t.push(e))),t}r?.config?.buildNumber||(new Date).toJSON().slice(0,10).replace(/-/g,"")},3168:(e,t,n)=>{"use strict";n.d(t,{isDebug:()=>g,isJestEnv:()=>u,isProduction:()=>m,timer:()=>x,win:()=>p});var s=n(3818),o=n(6808),r=n.n(o),i=n(6531),a=n(2829),c=n(5981),l=n(7814);const u="test"===n.g?.process?.env?.NODE_ENV;let d=n.g||window;if(!s.jU&&!u){const e={local:"https://sleepnumber.test:8090",qa:"https://qa.sleepnumber.com",staging:"https://staging.sleepnumber.com",production:"https://www.sleepnumber.com"},t=e[process.env.BUILD_ENV]||e.local,n=new URL(`${t}/categories/beds-on-sale`);d={...d,location:n}}const p=d,f=p?.sn_globals||{config:{}},m=()=>"production"===f.config.env;function g(){if(!s.jU)return!1;const e=r().get(i.default.debug.name);return e&&"false"!==e}p?.location?.pathname?.startsWith("/dev/"),p?.top?.location?.href?.includes("/admin/")||p?.location?.pathname?.startsWith("/admin/"),f.config.env,(0,l.namespace)("sn.toggleDebug",(function(){const e=g();r().set(i.default.debug.name,!e),console.log(`sn-debug set to "${!e}"`)})),"Intl"in p&&Intl.DateTimeFormat().resolvedOptions().timeZone;const h={esc:27,space:32,backspace:8,enter:13,tab:9,up:38,down:40,left:37,right:39,home:36,end:35,n:78,p:80};h.radio={prev:[h.left,h.up],next:[h.right,h.down]},h.arrows=[h.left,h.up,h.right,h.down];class w extends a.default{static idle=new w;static pending=new w;static success=new w;static error=new w;static active=new w;static complete=new w;static _=this.closeEnum()}class b extends a.default{static up=new b;static down=new b;static left=new b;static right=new b;static _=this.closeEnum()}class y extends a.default{static NotStarted=new y({name:"not_started"});static Login=new y({name:"login",next:()=>y.Shipping});static Shipping=new y({name:"shipping",next:()=>y.Delivery});static Delivery=new y({name:"delivery",next:()=>y.Payment});static Payment=new y({name:"payment",next:()=>y.Review});static Review=new y({name:"review",next:()=>y.Confirmation});static Confirmation=new y({name:"confirmation"});static _=this.closeEnum();constructor(e){super(),this.next=e.next,this.name=e.name}}class v extends a.default{static dropdown=new v(1e3);static sticky=new v(1020);static fixed=new v(1030);static modal_backdrop=new v(1040);static modal=new v(107159);static popover=new v(1060);static tooltip=new v(1070);static chat_button=new v(107158);static over_chat=new v(107159);constructor(e){super(),this.value=e}}const _={header_unpin:"-unpinned-header",jumping:"-jump-scrolling",position_sticky:"position-sticky",top_below_header:"top-below-header",search_open:"-search-open",skip_nav_show:"-skip-nav-show"};_.sticky_top=[_.position_sticky,_.top_below_header];const x=(0,c.isFunc)(p,"performance.now")?p?.performance:p?.Date},7109:(e,t,n)=>{"use strict";var s=n(3818),o=n(2829);class r extends o.default{static mb=new r({name:"mobile",start:0});static tb=new r({name:"tablet",start:768});static dt=new r({name:"desktop",start:1025});static _=this.closeEnum();constructor(e){let{name:t,start:n}=e;super(),this.name=t,this.start=n}}let i=!1;(()=>{try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get(){i=!0}}))}catch(e){}})(),s.jU&&document.createElement("div")},3302:(e,t,n)=>{"use strict";n.d(t,{findAncestor:()=>i,getElement:()=>r,isDisplayNone:()=>a,isElement:()=>o}),n(3818),n(3168);var s=n(5813);function o(e){return!!e?.nodeType}function r(e,t){if(e===window||o(e))return e;const n=t?r(t):document;try{return n.querySelector(e)||null}catch(n){return s.default.error("Error getting element","target",e,"container",t,n),null}}function i(e,t){let n=r(e)?.parentElement;if(!o(n))return null;for(;n;){if(t(n))return n;n=n.parentElement}return null}function a(e){return!!o(e)&&"none"===getComputedStyle(e).display}n(5203),n(1292)},2829:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});class s{static closeEnum(){const e=[],t=[];for(const[n,s]of Object.entries(this))e.push(n),s.enumKey=n,s.enumOrdinal=t.length,t.push(s);this.enumKeys=e,this.enumValues=t}static enumValueOf(e){const t=this.enumKeys.indexOf(e);if(t>=0)return this.enumValues[t]}static[Symbol.iterator](){return this.enumValues[Symbol.iterator]()}toString(){return`${this.constructor.name}.${this.enumKey}`}}const o=s},5981:(e,t,n)=>{"use strict";n.d(t,{identity:()=>a,isFunc:()=>o,noop:()=>i,required:()=>r});var s=n(7814);const o=function(){return 1===arguments.length?"function"==typeof(arguments.length<=0?void 0:arguments[0]):"function"==typeof(0,s.prop)(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])},r=e=>{throw new Error(`${e} is a required parameter.`)},i=()=>{},a=e=>e},5813:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var s=n(5981),o=n(3168);const r={};["assert","dir","count","log","info","debug","warn","error","table","trace","group","groupEnd","groupCollapsed","profile","profileEnd","time","timeEnd","timeStamp"].forEach((e=>{const t=o.win?.console&&o.win?.console[e],n=!o.isJestEnv&&!(0,o.isProduction)()||(0,o.isDebug)();r[e]=t&&n?function(){o.win.console[e](...arguments)}:s.noop,r.sndebug=function(){if((0,o.isDebug)()){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("DEBUG:",...t)}}}));const i=r},7814:(e,t,n)=>{"use strict";function s(e,t){if(!e)return e;let n=e;const s=t.replace(/\[/g,".").replace(/[\]"'`]/g,"").split(".");for(let e=0;e<s.length;e++){const t=n[s[e]],o=null==t;if(n=t,e===s.length-1||o)break}return n}function o(e,t){const s=n.g||window,o=e.split(".");let r,i,a;for(s[o[0]]||(s[o[0]]={}),r=s[o[0]],i=1,a=o.length;i<a;i++)r[o[i]]||(r[o[i]]={}),r=r[o[i]];return t&&(function(e,t,n){const s=t.split(".");let o,r,i;for(o=e,r=0,i=s.length;r<i;r++)r===i-1?o[s[r]]=n:(o[s[r]]||(o[s[r]]={}),o=o[s[r]])}(s,e,t),r=t),r}n.d(t,{namespace:()=>o,prop:()=>s})},5203:(e,t,n)=>{"use strict";n(3168)},5567:(e,t,n)=>{"use strict";n(5203),Object.freeze({test:"test",gallery:"gallery",postcard:"postcard",ghosted_base:"ghosted-base",promo:"promo",thumbnail:"thumbnail",corner_thumbnail:"corner-thumbnail",mb:"mobile",tb:"tablet",dt:"desktop",split:"split",flextop:"flextop",standard:"standard",front:"front",lifestyle:"45",bundle:"bundle",matt_only:"matt-only",matt_only_thumbnail:"matt-only-thumbnail",ib:"ib",ibf:"ibf",ff:"ff",ff1:"ff1",ff2:"ff2",ff3:"ff3",includes:"includes",base:"base",split_base:"split-base",temp_balancing:"temp-balancing",addon:"addon",single:"single",double:"double",new:"new",nextgen:"nextgen",next_gen_compare:"next-gen-compare"})},3818:(e,t)=>{"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="undefined"!=typeof window&&void 0!==window.document;"undefined"!=typeof process&&null!=process.versions&&process.versions.node,"object"===("undefined"==typeof self?"undefined":n(self))&&self.constructor&&self.constructor.name,"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),"undefined"!=typeof Deno&&void 0!==Deno.version&&Deno.version.deno;t.jU=s},6808:(e,t,n)=>{var s,o,r;r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var s in n)t[s]=n[s]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(s){function o(){}function r(t,n,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},o.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var i=JSON.stringify(n);/^[\{\[]/.test(i)&&(n=i)}catch(e){}n=s.write?s.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in r)r[c]&&(a+="; "+c,!0!==r[c]&&(a+="="+r[c].split(";")[0]));return document.cookie=t+"="+n+a}}function i(e,n){if("undefined"!=typeof document){for(var o={},r=document.cookie?document.cookie.split("; "):[],i=0;i<r.length;i++){var a=r[i].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(a[0]);if(c=(s.read||s)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[l]=c,e===l)break}catch(e){}}return e?o[e]:o}}return o.set=r,o.get=function(e){return i(e,!1)},o.getJSON=function(e){return i(e,!0)},o.remove=function(t,n){r(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))},void 0===(o="function"==typeof(s=r)?s.call(t,n,t,e):s)||(e.exports=o),e.exports=r()}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};(()=>{"use strict";n.r(s),n.d(s,{default:()=>c});var e=n(5813),t=n(3302),o=n(9576),r=n(3168),i=n(1292);function a(e){const t=r.timer.now(),n=new i.default;return function s(){e.complete?n.resolve():r.timer.now()-t>300?n.reject(new Error("ImageTracker: Image took too long to load",e)):setTimeout(s,50)}(),n}const c=class{#t;constructor(e){this.#t=e}get element(){return this.#t}track(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,t.isElement)(this.#t)?new Promise((s=>{setTimeout((()=>{const n=[...this.#t.querySelectorAll("img")],r=(0,o.getBgImages)(this.#t).filter((e=>{let{node:n}=e;return null===(0,t.findAncestor)(n,t.isDisplayNone)})).map((e=>{let{bg:t}=e;return t.match(/url\("(.*)"\)/)[1]})).map((e=>{const t=new Image;return t.src=e,t}));e.default.sndebug("ImageTracker.track",this.#t,n.length),Promise.allSettled([...n,...r].map(a)).then(s)}),n)})):Promise.reject(new Error("ImageTracker was not created with a valid element",this.#t))}}})();var o=exports;for(var r in s)o[r]=s[r];s.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();